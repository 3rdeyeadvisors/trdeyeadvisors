<!DOCTYPE html>
<html>
<head>
    <title>Generate 3EA Social Banner</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 50px auto; 
            padding: 20px; 
            background: #0A0B14;
            color: white;
        }
        button { 
            background: #A855F7; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 16px;
            margin: 10px 0;
        }
        button:hover { background: #7C3AED; }
        button:disabled { background: #6B7280; cursor: not-allowed; }
        #result { margin-top: 20px; }
        img { max-width: 100%; border-radius: 8px; margin: 20px 0; }
        .loading { color: #A855F7; }
    </style>
</head>
<body>
    <h1>Generate 3EA Social Banner</h1>
    <p>Click the button below to generate your futuristic decentralized learning hub banner</p>
    
    <button onclick="generateBanner()" id="generateBtn">Generate 3EA Banner</button>
    <div id="result"></div>

    <script>
        async function generateBanner() {
            const btn = document.getElementById('generateBtn');
            const result = document.getElementById('result');
            
            btn.disabled = true;
            btn.textContent = 'Generating...';
            result.innerHTML = '<p class="loading">üé® Creating your futuristic 3EA banner...</p>';

            try {
                const response = await fetch('https://zapbkuaejvzpqerkkcnc.supabase.co/functions/v1/generate-social-banner', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InphcGJrdWFlanZ6cHFlcmtrY25jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI5NjAxMTksImV4cCI6MjA2ODUzNjExOX0.kmzeGjrbpI2qB5UhKoAOoEspxWYGk8UthowEA_f154o'
                    },
                    body: JSON.stringify({
                        prompt: "Futuristic decentralized learning hub design, glowing abstract network of soft bubble-like nodes connected by smooth lines, with a bold stylized '3EA' in the center, using deep purples (#5B21B6, #7C3AED), dark galaxy tones (#0A0B14, #1A1B2E), and subtle neon accents (#A855F7, #E879F9), minimal and clean layout, professional web3 aesthetic, inviting and trustworthy vibe for education and DeFi learning, smooth gradients, high-tech atmosphere, ultra high resolution, banner format 1792x1024",
                        size: "1792x1024",
                        quality: "high"
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }

                if (data.data && data.data[0] && data.data[0].b64_json) {
                    const imageUrl = `data:image/webp;base64,${data.data[0].b64_json}`;
                    result.innerHTML = `
                        <h3>‚ú® Your 3EA Social Banner is Ready!</h3>
                        <img src="${imageUrl}" alt="3EA Social Banner" />
                        <p>
                            <a href="${imageUrl}" download="3ea-social-banner.webp" 
                               style="background: #A855F7; color: white; padding: 10px 20px; 
                                      text-decoration: none; border-radius: 5px; display: inline-block;">
                                üì• Download Banner
                            </a>
                        </p>
                        <p style="font-size: 14px; color: #9CA3AF;">
                            Size: 1792x1024px ‚Ä¢ Perfect for social media sharing
                        </p>
                    `;
                } else {
                    throw new Error('No image data received');
                }
            } catch (error) {
                result.innerHTML = `<p style="color: #EF4444;">‚ùå Error: ${error.message}</p>`;
            } finally {
                btn.disabled = false;
                btn.textContent = 'Generate Another Banner';
            }
        }
    </script>
</body>
</html>